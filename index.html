<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Currency Quotes</title>
</head>

<body>
    <div id="currencyQuotesApp"></div>

    <script src="app.js"></script>
    <script>
        const app = new currencyQuotes('currencyQuotesApp', 3);

        var captureEnabled = false,
            xFrom = 0,
            xTo = 0,
            xDraging = 0,
            dragDirection = undefined,
            pixelsDraged = 0;

        startCapture = e => {
            xFrom = e.clientX;
            console.log('Capture enabled', `X: ${xFrom}`)
            captureEnabled = true;
        }

        captureDrag = e => {
            if (captureEnabled) {
                xDraging = e.clientX;
                console.log('Capturing drag', `X: ${xDraging}`)
                setDragDirection();
                distanceDraged();
                // swipe();
            }
        }

        distanceDraged = () => {
            if (dragDirection === 'RIGHT') {
                pixelsDraged = pixelsDraged + 1
            }
            if (dragDirection === 'LEFT') {
                pixelsDraged = pixelsDraged - 1
            }
        }

        endCapture = e => {
            xTop = e.clientX;
            // console.log('Capture disabled', `X: ${xTop}`)
            pixelsDraged = 0;
            captureEnabled = false;
        }

        setDragDirection = () => {
            if (xFrom < xDraging) {
                dragDirection = 'RIGHT';
                // console.log('Drag direction:', dragDirection)
            }
            if (xFrom > xDraging) {
                dragDirection = 'LEFT';
                // console.log('Drag direction:', dragDirection);
            }
        }

        swipe = () => {
            xFromReset();
            app.setCurrentScrollX();
            app.appContainer.scroll({
                left: app.currentScrollX - pixelsDraged,
                // behavior: ''
            });
        }

        xFromReset = () => {
            if (xDraging !== xFrom) xFrom = xDraging;
        }

        // app.appContainer.addEventListener('mousedown', startCapture, false);
        // app.appContainer.addEventListener('touchstart', startCapture, false);
        ['mousedown', 'touchmove'].forEach(e => {
            app.appContainer.addEventListener(e, startCapture, false);
        });

        // app.appContainer.addEventListener('mousemove', captureDrag, false);
        // app.appContainer.addEventListener('touchmove', captureDrag, false);
        ['mousemove', 'touchmove'].forEach(e => {
            app.appContainer.addEventListener(e, captureDrag, false);
        });

        // app.appContainer.addEventListener('mouseup', endCapture, false);
        // app.appContainer.addEventListener('touchend', endCapture, false);
        ['mouseup', 'touchend'].forEach(e => {
            app.appContainer.addEventListener(e, endCapture, false);
        });

    </script>
</body>

</html>